import tkinter as tk
from tkinter import Canvas, Frame, Scrollbar, Label, Button
from matplotlib import font_manager

root = tk.Tk()
root.geometry("800x600")

text = Label(root, text="mjau", font=("Arial", 16))
text.pack()
ime_teksta = text

font_frame = Frame(root)
font_frame.pack(side="left", fill="both", expand=True)

size_frame = Frame(root)
size_frame.pack(side="right", fill="both", expand=True)

canvas_font = Canvas(font_frame)
frame_font = Frame(canvas_font)
scrollbar_font = Scrollbar(font_frame, orient="vertical", command=canvas_font.yview)
canvas_font.configure(yscrollcommand=scrollbar_font.set)
scrollbar_font.pack(side="right", fill="y")
canvas_font.pack(side="left", fill="both", expand=True)
canvas_font.create_window((0, 0), window=frame_font, anchor="nw")
frame_font.bind("<Configure>", lambda event, canvas=canvas_font: canvas.configure(scrollregion=canvas.bbox("all")))

canvas_size = Canvas(size_frame)
frame_size = Frame(canvas_size)
scrollbar_size = Scrollbar(size_frame, orient="vertical", command=canvas_size.yview)
canvas_size.configure(yscrollcommand=scrollbar_size.set)
scrollbar_size.pack(side="right", fill="y")
canvas_size.pack(side="left", fill="both", expand=True)
canvas_size.create_window((0, 0), window=frame_size, anchor="nw")
frame_size.bind("<Configure>", lambda event, canvas=canvas_size: canvas.configure(scrollregion=canvas.bbox("all")))

font_list_visible = False
size_list_visible = False

def change_font(ime_fonta, ime_teksta, trenutna_velicina):
    ime_teksta.config(font=(ime_fonta, trenutna_velicina))

def toggle_fonts(ime_teksta):
    global font_list_visible
    if font_list_visible:
        # Clear existing widgets in frame_font
        for widget in frame_font.winfo_children():
            widget.destroy()
        font_list_visible = False
    else:
        list_fonts(ime_teksta)
        font_list_visible = True

def list_fonts(ime_teksta):
    desired_fonts = {"Calibri", "Arial", "Times New Roman", "Cambria", "Algerian"}
    available_fonts = sorted([f.name for f in font_manager.fontManager.ttflist if f.name in desired_fonts])

    # Clear existing widgets in frame_font
    for widget in frame_font.winfo_children():
        widget.destroy()

    font_size = get_current_font_size(ime_teksta)
    for font in available_fonts:
        myButton = Button(frame_font, text=font, command=lambda f=font: change_font(f, ime_teksta, font_size))
        myButton.pack()

def promena_velicine(velicina, ime_teksta, trenutni_font):
    ime_teksta.config(font=(trenutni_font, velicina))

def toggle_sizes(ime_teksta):
    global size_list_visible
    if size_list_visible:
        # Clear existing widgets in frame_size
        for widget in frame_size.winfo_children():
            widget.destroy()
        size_list_visible = False
    else:
        lista_velicina(ime_teksta)
        size_list_visible = True

def lista_velicina(ime_teksta):
    # Clear existing widgets in frame_size
    for widget in frame_size.winfo_children():
        widget.destroy()

    font_family = get_current_font_family(ime_teksta)
    for i in range(1, 73):
        myButton = Button(frame_size, text=str(i), command=lambda f=i: promena_velicine(f, ime_teksta, font_family))
        myButton.pack()

def get_current_font_size(ime_teksta):
    current_font = ime_teksta.cget("font")
    font_parts = current_font.split()
    if len(font_parts) > 1:
        font_size = int(font_parts[-1])
        return font_size

def get_current_font_family(ime_teksta):
    current_font = ime_teksta.cget("font")
    font_parts = current_font.split()
    if len(font_parts) > 0:
        font_family = font_parts[0]
        return font_family

# Button to open the list of fonts
font_button = Button(root, text="Change Fonts", command=lambda: toggle_fonts(ime_teksta))
font_button.place(x=10, y=10)

# Button to open the list of sizes
size_button = Button(root, text="Change Size", command=lambda: toggle_sizes(ime_teksta))
size_button.place(x=710, y=10)  # Adjust the x position based on window width

root.mainloop()


